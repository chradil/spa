---
layout: page
---
<!-- The way we are accessing the elements in _data/countries.csv is a linear search on an array.
     There is surely a better way to do this, involving hash tables, surely, no?? -->

<!-- It's also not 100% clear to me why we can't use the simple indexing approach that we use for protests...
     # assign protest_row = site.data.protests[page.row_index]
     Like that, why doesn't that work? I mean, it factually doesn't. But why? Why not? Arrrgghhh.
     The answer appears to have something to do with a mismatch between country names in different
     records, but I still haven't pinned it down -->

{% for row in site.data.countries %}
  {% if row.country == page.title %}
    {% assign country_row = row %}
  {% endif %}
{% endfor %}

    <article class="spa-country">

      <section class="spa-country-intro">

        <article class="spa-country-description">
          <section>
            <p>{{ country_row.description }}</p>
          </section>
        </article>

        <article class="spa-country-map">
          <section class="spa-img-container">
            <img src="{{site.baseurl}}/assets/img/country-images/{{country_row.image_file}}">
          </section>
        </article>

      </section>

      <section>

        <article>
          <h3>DATA VISUALIZATIONS</h3>

          {% if country_row.viz_1 != '' %}
          <section>
            <article>
              <section class="spa-img-container">
                <img src="{{site.baseurl}}/assets/img/country-line-graphs/{{country_row.viz_1}}">
              </section>
            </article>
          </section>
          {% endif %}

          {% if country_row.timelapse %}
          <section>
            <article>
              <section class="spa-img-container">
                <img src="{{site.baseurl}}/assets/img/country-heatmaps/{{country_row.timelapse}}">
              </section>
            </article>
          </section>
          {% endif %}

        </article>

      </section>

      <section>
        <article>
          <h3>PROTESTS</h3>
          <section class="spa-overflow">
            {% for protest in site.data.protests %}
              {% if protest['Country Name'] == page.title %}
              <article class="spa-country-intro spa-protest-result"><a class="spa-protest-result" target="_blank" href="{{site.baseurl}}/protests/{{ protest['unique-key'] }}">
                  <h4 style="padding:0px; margin:0px">{{ protest['Protest Name'] }}</h4><br> 
                  {% if protest['date'] %}
                    {{ protest['date'] }} <br>
                    {% endif %}
                    <b>{{ protest['Locality Name'] }}, {{ protest['School Name'] }}</b><br> 
                    {{ protest['Description of Protest'] }} (<a href="{{ protest['Primary Source'] }}">Primary Source</a>)
                    </a>
              </article>
            
              {% endif %}
            {% endfor %}
          </section>
        </article>
      </section>

    </article>
