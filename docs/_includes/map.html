
<script type="text/javascript">
  (function() {

    // A function that accepts an array of bokeh callback names, and
    // executes all of them.
    let execBokehCallbacks = function(callbackNames) {
      for (const cbn of callbackNames) {
        window.Bokeh.documents[0].get_model_by_name(cbn).execute();
      }
    };

    window.addEventListener('DOMContentLoaded', function(event) {
      let delay = 16;
      console.log('delay ', delay);
      let intervalfunc = function() {
        window.clearInterval(checkfunc);
        console.log('delay ', delay);
        if (window.Bokeh && window.Bokeh.documents.length > 0) {
          const callbackNames = ['callback-load-hash-coordinates-country', 'callback-load-hash-coordinates-protests', 'callback-load-hash-filter-GeographicContext', 'callback-load-hash-filter-ProtestLocation', 'callback-load-hash-filter-EventType', 'callback-load-hash-filter-ActorsInvolved', 'callback-load-hash-filter-Causes', 'callback-load-hash-filter-Targets', 'callback-load-hash-filter-Characteristics'];
          execBokehCallbacks(callbackNames);
        } else if (delay < 2 ** 20) {
          delay = delay * 2;
          checkfunc = window.setInterval(intervalfunc, delay);
          console.log('resetting interval with delay ', delay);
        }
      };
      let checkfunc = window.setInterval(intervalfunc, delay);
    });

  })();
</script>
    